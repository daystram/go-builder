stages:
  - generate
  - trigger

generate-config:
  stage: generate
  script: ./generate-jobs.sh > configs.yml
  artifacts:
    paths:
      - configs.yml

trigger-pipelines:
  stage: trigger
  trigger:
    include:
      - artifact: configs.yml
        job: generate-config
    strategy: depend
